{% extends "base.html" %}
{% block title %}Orders Â· B2B Service Marketplace{% endblock %}

{% block content %}
<h1 class="hero-title" style="font-size: 1.4rem; margin-bottom: 0.5rem;">
  Orders
</h1>
<p class="hero-subtitle" style="margin-bottom: 1rem;">
  Track orders you've placed as a buyer and orders you receive as a service provider.
</p>

<div class="dashboard-grid">
  <div class="dashboard-card">
    <h2>As buyer</h2>
    {% if orders_buyer %}
    <table class="table">
      <thead>
        <tr>
          <th>Service</th>
          <th>Seller</th>
          <th>Status</th>
          <th>Opened</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders_buyer %}
        <tr>
          <td>
            <a href="{{ url_for('main.order_detail', order_id=order.id) }}">
              {{ order.service.title }}
            </a>
          </td>
          <td>{{ order.seller.profile.company_name if order.seller.profile else order.seller.email }}</td>
          <td>{{ order.status|capitalize }}</td>
          <td>{{ order.created_at.strftime('%Y-%m-%d') }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="section-subtitle">No orders as buyer.</p>
    {% endif %}
  </div>

  <div class="dashboard-card">
    <h2>As seller</h2>
    {% if orders_seller %}
    <table class="table">
      <thead>
        <tr>
          <th>Service</th>
          <th>Buyer</th>
          <th>Status</th>
          <th>Opened</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders_seller %}
        <tr>
          <td>
            <a href="{{ url_for('main.order_detail', order_id=order.id) }}">
              {{ order.service.title }}
            </a>
          </td>
          <td>{{ order.buyer.profile.company_name if order.buyer.profile else order.buyer.email }}</td>
          <td>{{ order.status|capitalize }}</td>
          <td>{{ order.created_at.strftime('%Y-%m-%d') }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="section-subtitle">No orders as seller.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
